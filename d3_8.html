<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<link rel="stylesheet" href="css/ex_primary.css" />
	<link rel="stylesheet" href="css/d3_master.css" />
	<script src="js/d3.v3.js"></script>
	<title>d3.js - Scales</title>
</head>
<body>
	<div id="page-wrapper">
		<div id="content">
			<div id="header">
				<div id="ex-name">
					Scales:
				</div>
				<div id="detail">
					<p>This exercise focuses on utilizing <span class="text-highlight">scales</span>. There can be as many scale functions as needed, and each can be used repeatedly. Scale is the <span class="text-highlight">mathematical relationship</span> between data inputs and visual outputs, while axis is the <span class="text-highlight">visual representation</span> of a scale.
						<blockquote>Scales are functions that map from an input domain to an output range. -- Mike Bostock</blockquote>
					A key concept is <span class="text-highlight">normalization</span>, which is a process that maps one value to another.
					</p>
				</div>
			</div>
			<h5>Linear Scale</h5>
				<div class="info">
					In this example, each randomly generated data point will have a x range of 1000 to 1500, and a y range of 500 to 1000, and they will be dynamically scaled down using the scale function.
				</div>
			<div id="linear" class="example">
				<!--javascript output goes here-->
			</div>
		</div>
	</div>

	<script>
		//Linear Scale example
		function randNum(min, max) {
			return Math.floor(Math.random() * (max-min + 1)) + min;
		}

		function findxMinMax(dataset) {
			var max = d3.max(dataset,function(d) {
						return d[0];
			});
			var min = d3.min(dataset,function(d) {
						return d[0];
			});
			return [min, max]
		}

		function findyMinMax(dataset) {
		var max = d3.max(dataset,function(d) {
					return d[1];
		});
		var min = d3.min(dataset,function(d) {
					return d[1];
		});
		return [min, max]
		}

		var dataset = [];
		for (var i=0; i < 8; i++){
			var xMax = randNum(1000,1500);
			var yMax = randNum(500,1000);
			dataset.push([xMax,yMax]);
		}

		var w = 900;
		var h = 100;
		var svg_linear = d3.select("div #linear")
						.append("svg")
						.attr({
							width: w,
							height: h
						});

		var xScale = d3.scale.linear()
					.domain([findxMinMax(dataset)[0], findxMinMax(dataset)[1]])
					.range([10, w - 50]);

		var yScale = d3.scale.linear()
					.domain([findyMinMax(dataset)[0], findyMinMax(dataset)[1]])
					.range([5, h - 10]);

		svg_linear.selectAll("circle")
				.data(dataset)
				.enter()
				.append("circle")
				.attr({
					cx: function(d) {return xScale(d[0])},
					cy: function(d) {return yScale(d[1])},
					r: 2
				})
		svg_linear.selectAll("text")
				.data(dataset)
				.enter()
				.append("text")
				.text(function(d){return "["+d[0]+","+d[1]+"]";})
				.attr({
					x: function(d) {return xScale(d[0])},
					y: function(d) {return yScale(d[1])+15},
					"text-anchor": "middle",
					"font-family": "sans-serif",
					"font-size": "0.7em",
					"fill": "blue"
				})

	</script>

</body>

</html>
