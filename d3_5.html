<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<link rel="stylesheet" href="css/ex_primary.css" />
	<link rel="stylesheet" href="css/d3_master.css" />
	<script src="js/d3.v3.js"></script>
	<title>d3.js - Drawing SVG III</title>
</head>
<body>
	<div id="page-wrapper">
		<div id="content">
			<div id="header">
				<div id="ex-name">
					Drawing with SVG III (Labels)
				</div>
				<div id="detail">
					<p>This exercise adds labels to the previous <a href="d3_4.html"> SVG bar chart</a>. The precise positioning of the text labels are adjusted by modifying the x-/y-values.
					</p> 
				</div>
			</div>
			<div id="main" class="min-height">
				<!--javascript generated chart output here-->
			</div>
		</div>
	</div>

	<script>
		var w = 500;
		var h = 150;
		var barPadding = 1;
		var dataset = [];
		for (var i=0; i < 25; i++) {
			var newNumber = Math.floor(Math.random() * 25);
			dataset.push(newNumber);
		}
		var svg = d3.select("div #main")
				.append("svg")
				.attr("width", w)
				.attr("height",h);

		svg.selectAll("rect")
				.data(dataset)
				.enter()
				.append("rect")
				.attr({
					x: function(d,i) {return i * (w/dataset.length);},
					y: function(d) {return h - (d*4);},
					width: w / dataset.length - barPadding,
					height: function(d) {return d * 4;},
					fill: function(d) {return "rgb(0,100," + (d * 10) + ")";}
				});

		svg.selectAll("text")
				.data(dataset)
				.enter()
				.append("text")
				.text(function(d){
					return d;
				})
				.attr({
					x: function(d,i){return i * (w/dataset.length) + (w/dataset.length - barPadding) /2 -1;},
					y: function(d) {return h-(d*4)-1;},
					"font-family": "sans-serif",
					"font-size": ".8em",
					"fill": "#202760",
					"text-anchor": "middle",
					"font-weight": "bold"
				});

	</script>

</body>

</html>
