<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<link rel="stylesheet" href="css/ex_primary.css" />
	<link rel="stylesheet" href="css/d3_4.css" />
	<script src="js/d3.v3.js"></script>
	<title>d3.js - Drawing SVG II</title>
</head>
<body>
	<div id="page-wrapper">
		<div id="content">
			<div id="header">
				<div id="ex-name">
					Drawing with SVG II
				</div>
				<div id="detail">
					<p>This exercise improves on the earlier version of <a href="d3_2.html">bar chart</a>.
						<blockquote>With D3, you always have to first select whatever it is you're about to act on, even if that selection is momentarily empty.</blockquote>
						By looking at the code, this exercise features dynamic color fill and multivalue mapping (attr).
					</p> 
				</div>
			</div>
			<div id="main" class="min-height">
				<!--javascript generated chart output here-->
			</div>
		</div>
	</div>

	<script>
		var w = 500;
		var h = 150;
		var barPadding = 1;
		var dataset = [];
		for (var i=0; i < 35; i++) {
			var newNumber = Math.floor(Math.random() * 25);
			dataset.push(newNumber);
		}
		var svg = d3.select("div #main")
				.append("svg")
				.attr("width", w)
				.attr("height",h);

		svg.selectAll("rect")
				.data(dataset)
				.enter()
				.append("rect")
				.attr({
					x: function(d,i) {return i * (w/dataset.length);},
					y: function(d) {return h - (d*4);},
					width: w / dataset.length - barPadding,
					height: function(d) {return d * 4;},
					fill: function(d) {return "rgb(0,100," + (d * 10) + ")";}
				});

	</script>

</body>

</html>
